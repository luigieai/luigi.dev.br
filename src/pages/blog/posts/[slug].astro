---
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';
import PostLayout from '../../../layouts/PostLayout.astro';
import type { BlogSchema } from '../../../content.config';
import { render } from 'astro:content';

export async function getStaticPaths() {
    const postEntries = await getCollection('blog');
    return postEntries.map(entry => ( { 
        params: { id: entry.id }, props: { entry },
    } ));
}

interface Props {
    post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const postData : BlogSchema = post.data;
const { Content } = await render(post);
---

<PostLayout title={postData.title} description={postData.description} pubDate={postData.pubDate} heroImage={postData.heroImage} updatedDate={postData.updatedDate}>
    <Content/>
</PostLayout>